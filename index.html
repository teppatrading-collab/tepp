<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Teppa Trading</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="logo">TEPPA <span>TRADING</span></div>

    <div class="nav-actions">
      <button id="loginBtn" onclick="openAuth('login')">Login</button>
      <button id="signupBtn" onclick="openAuth('signup')" class="outline">Sign Up</button>
      <button id="logoutBtn" class="hidden" onclick="logout()">Logout</button>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <h1>Master Forex & Indices</h1>
    <p>Education ‚Ä¢ Discipline ‚Ä¢ Consistency</p>
    <button class="cta">Apply For Mentorship</button>
  </section>

  <!-- AUTH MODAL -->
  <div class="modal hidden" id="authModal">
    <div class="modal-box">
      <h2 id="authTitle">Login</h2>
      <input type="email" id="email" placeholder="Email" />
      <input type="password" id="password" placeholder="Password" />
      <button onclick="handleAuth()">Submit</button>
      <p onclick="closeAuth()" style="cursor:pointer;">Close</p>
    </div>
  </div>

  <!-- STATS -->
  <section class="stats">
    <div>
      <h2>0</h2>
      <p>Courses</p>
    </div>
    <div>
      <h2>0</h2>
      <p>Hours</p>
    </div>
    <div>
      <h2>0</h2>
      <p>Certificates</p>
    </div>
  </section>

  <!-- SUPABASE -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    /* üîê SUPABASE CONFIG */
    const supabase = window.supabase.createClient(
      'https://xuifnaypkeeukyjvlapi.supabase.co',
      'sb_publishable_44vXTyFg__8x2Ohqa8KGuA_OV9HX2ob'
    )

    let authMode = 'login'

    function openAuth(mode) {
      authMode = mode
      document.getElementById('authTitle').innerText =
        mode === 'login' ? 'Login' : 'Sign Up'
      document.getElementById('authModal').classList.remove('hidden')
    }

    function closeAuth() {
      document.getElementById('authModal').classList.add('hidden')
    }

    async function handleAuth() {
      const email = document.getElementById('email').value
      const password = document.getElementById('password').value

      let result

      if (authMode === 'login') {
        result = await supabase.auth.signInWithPassword({ email, password })
      } else {
        result = await supabase.auth.signUp({ email, password })
      }

      if (result.error) {
        alert(result.error.message)
        return
      }

      alert(authMode === 'login'
        ? 'Logged in successfully'
        : 'Signup successful ‚Äî check your email')

      closeAuth()
      updateUI()
    }

    async function logout() {
      await supabase.auth.signOut()
      updateUI()
      alert('Logged out')
    }

    async function updateUI() {
      const { data } = await supabase.auth.getUser()

      document.getElementById('loginBtn').classList.toggle('hidden', !!data.user)
      document.getElementById('signupBtn').classList.toggle('hidden', !!data.user)
      document.getElementById('logoutBtn').classList.toggle('hidden', !data.user)
    }

    updateUI()
  </script>

</body>
</html>
